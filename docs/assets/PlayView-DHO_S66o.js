import"./base-Cgzfsrv9.js";import{E as i}from"./el-message-VZx6gfH4.js";import{d as c,S as n,o as m,a8 as p,K as d,u as o,j as f,M as u,z as h,h as y,a4 as v}from"./index-BZbtDiDU.js";const x={key:0,class:"iframe-box"},_=["src"],b=c({__name:"PlayView",setup(w){const t=n({src:""});m(()=>{const e=window.history.state.type;document.getElementsByTagName("link")[0].remove();const a=document.createElement("link");a.setAttribute("type","image/svg+xml"),a.setAttribute("rel","icon"),a.setAttribute("href","/"+e+".svg"),document.head.appendChild(a)}),p(()=>{l()}),d(()=>{t.src=""});const l=()=>{const e=JSON.parse(window.history.state.params);if(window.history.state.type==="iqiyi")if(e.playUrl)t.src="https://jx.xmflv.com/?url="+e.playUrl,document.title=e.title;else if(e.albumInfo.pageUrl)t.src="https://jx.xmflv.com/?url="+e.albumInfo.pageUrl,document.title=e.albumInfo.title;else if(e.albumInfo.qipuId){if(document.title=e.albumInfo.title,e.albumInfo.itemLink){t.src="https://jx.xmflv.com/?url="+e.albumInfo.itemLink;return}const r=`https://pcw-api.iqiyi.com/video/video/videoinfowithuser/${e.albumInfo.qipuId}`;fetch(r).then(s=>s.json()).then(s=>{console.log("Success:",s),s.data.playUrl?t.src="https://jx.xmflv.com/?url="+s.data.playUrl:s.data.firstVideoUrl&&(t.src="https://jx.xmflv.com/?url="+s.data.firstVideoUrl)}).catch(s=>{console.error("Error:",s),i.error({message:s,offset:100})})}else t.src="";else console.log(e,e.playUrl),e.playUrl?(t.src="https://a.wkvip.net/index.php?url="+e.playUrl,document.title=e.title):t.src=""};return(e,a)=>o(t).src?(y(),f("div",x,[u("iframe",{id:"iframe",class:"z-width-fill z-height-fill",src:o(t).src,frameborder:"0",allowfullscreen:"true"},null,8,_)])):h("",!0)}}),k=v(b,[["__scopeId","data-v-076da989"]]);export{k as default};
