import{d as i,r as c,o as n,b as m,b0 as p,u as l,e as d,f,an as u,l as h,b1 as y}from"./index-rUpndQaj.js";import{E as v}from"./el-message-DE1bdL3Q.js";const b={key:0,class:"iframe-box"},x=["src"],_=i({__name:"PlayView",setup(w){const t=c({src:""});n(()=>{const e=window.history.state.type;document.getElementsByTagName("link")[0].remove();const a=document.createElement("link");a.setAttribute("type","image/svg+xml"),a.setAttribute("rel","icon"),a.setAttribute("href","/"+e+".svg"),document.head.appendChild(a)}),m(()=>{o()}),p(()=>{t.src=""});const o=()=>{const e=JSON.parse(window.history.state.params);if(window.history.state.type==="iqiyi")if(e.playUrl)t.src="https://jx.xmflv.com/?url="+e.playUrl,document.title=e.title;else if(e.albumInfo.pageUrl)t.src="https://jx.xmflv.com/?url="+e.albumInfo.pageUrl,document.title=e.albumInfo.title;else if(e.albumInfo.qipuId){if(document.title=e.albumInfo.title,e.albumInfo.itemLink){t.src="https://jx.xmflv.com/?url="+e.albumInfo.itemLink;return}const r=`https://pcw-api.iqiyi.com/video/video/videoinfowithuser/${e.albumInfo.qipuId}`;fetch(r).then(s=>s.json()).then(s=>{console.log("Success:",s),s.data.playUrl?t.src="https://jx.xmflv.com/?url="+s.data.playUrl:s.data.firstVideoUrl&&(t.src="https://jx.xmflv.com/?url="+s.data.firstVideoUrl)}).catch(s=>{console.error("Error:",s),v.error({message:s,offset:100})})}else t.src="";else console.log(e,e.playUrl),e.playUrl?(t.src="https://a.wkvip.net/index.php?url="+e.playUrl,document.title=e.title):t.src=""};return(e,a)=>l(t).src?(h(),d("div",b,[f("iframe",{id:"iframe",class:"z-width-fill z-height-fill",src:l(t).src,frameborder:"0",allowfullscreen:"true"},null,8,x)])):u("",!0)}}),U=y(_,[["__scopeId","data-v-076da989"]]);export{U as default};
